<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
		<title>ViViz</title>
		
		<link rel="icon" type="image/ico" href="./enlil.ico"/>		
		
		<script type="text/javascript" src=".-cat.js"></script>

		<!-- Main -->


		<link rel="stylesheet" href="./js/deps/codemirror-2.3/lib/codemirror.css">		


				
		
		<!-- Menu configuration -->

		<!-- Misc -->
		
		<!-- Uploaded catalogs (catalogjsonuploads) -->

		<!-- Base catalog (catalogjsonbase) -->
		<!--script type="text/javascript" src="./xml/catalog.json"></script--!>


		<!--
		Configuration data inside this script node is read by default.
		If empty, xml/catalog.xml is read.  Place configuration data here
		if this index.htm was read from a local file (file://) instead of http://.
		-->
		<script id="xml"  type="text/x-jQuery-tmpl">
		</script>

		<script type="text/javascript">
		

		VIVIZ = {"CATALOGXML":"xml/enlil.xml","lazyLoadMax":2};

		$(document).ready(function(){
			gallery("#gallery1");
			$('#g-container').hide();
			if (location.hash === "") {
				return;
			} else {
				enlil();
				$("#enlilmain").hide();
			}

		})

		function enlil() {


			if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
				console.log("Mobile Device Detected.")
				var enlildiv = "enlilmobile";
			} else {
				var enlildiv = "#enlil";
			}
			
			//$("#gallerystyle").attr('href',"")
			
			var enlildiv = "#enlilmobile";
			var si;
			$(enlildiv + ' #ss_stop').click(
					function () {
						clearInterval(si);
					}
			)
			$(enlildiv + ' #ss_start').click(
					function () {
						$("#next").click();
						si = setInterval(
								function () {
									$("#next").click();
								},'200');
					}
			)
			$(enlildiv + ' #ss_next').click(function () {$("#next").click();})
			$(enlildiv + ' #ss_prev').click(function () {$("#previous").click();})

			$(window).hashchange(function() {
					if (location.hash.match(/\/IPSBD-ENLIL\//)) {
					$("#shock").hide();
				} else {
					$("#shock").show();
				}
			});
			
			$('#g-container').hide();
			//$("#enlil").show()
			$(enlildiv).show()
			$(enlildiv + ' td.input a').on("click",function () {	$(enlildiv + " td.input").attr('bgcolor','#4488cc');$(this).parent().attr("bgcolor","#224488");});
			$(enlildiv + ' td.output a').on("click",function () {	$(enlildiv + " td.output").attr('bgcolor','#4488cc');$(this).parent().attr("bgcolor","#224488");});

			$(enlildiv + ' td.output a').on("click",xupdatehash);
			$(enlildiv + ' td.output a').css('cursor','pointer')
			$(enlildiv + ' select').css('font-size','12pt');
		}

			function getdownload() {
				var aa = $( "#dl_select option:selected" ).text();
				if(aa == "File List"){ window.location = "_blank"; }
				if(aa == "Animated GIF"){ window.location = "http://aurora.mesa.gmu.edu/cgi-bin/imgconvert.cgi?base=http://spaceweather.gmu.edu/projects/enlil/ipsbd/tim1evo4vel2b/&in=0240.gif,0249.gif&height=200&out=gif"; }
				if(aa == "MP4"){ window.location = "_blank"; }
				if(aa == "MOV"){ window.location = "http://aurora.mesa.gmu.edu/cgi-bin/imgconvert.cgi?base=http://spaceweather.gmu.edu/projects/enlil/ipsbd/tim1evo4vel2b/&in=0240.gif,0249.gif&height=200&out=gif"; }
				if(aa == "Zip File"){ window.location = "http://aurora.mesa.gmu.edu/cgi-bin/imgconvert.cgi?base=http://spaceweather.gmu.edu/projects/enlil/ipsbd/tim1evo4vel2b/&in=0240.gif,0249.gif&height=200&out=zip"; }
			}

			function xupdatehash() {

				var output = $(this).children('font').attr('id');
				var title = $(this).children('font').attr('id');
				var myoutput = $('#sitetitle').text().split('Solar Wind Prediction');

				if(title.indexOf('/') === -1){ //NOT A MATCH ITS A MODEL
					$('#sitetitle').text(title + ' \u2013 ' + 'Solar Wind Prediction' + myoutput[1]);
				}
				else { //ITS A MATCH ITS A VARIABLE
					var newtitle = title.split('/');
					$('#sitetitle').text(myoutput[0] + 'Solar Wind Prediction' + ' \u2013 ' + newtitle[0] + ' ' + newtitle[1]);
				}

				location.hash = '/' + location.hash.split('/')[1] + '/' + output;
			}

		</script>
	</head>

</html>
